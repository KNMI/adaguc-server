<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
  <Style name="filledcountries" title="Overlay countries" abstract="Overlay countries">
    <Legend fixedclasses="true" tickinterval="1000" tickround="1">bluewhitered</Legend>
    <Min>0.0</Min>
    <Max>1000</Max>
    <RenderMethod>nearest</RenderMethod>
    <FeatureInterval match="0" matchid="Type" fillcolor="#D2FEFE" bgcolor="#00A000"/>
    <FeatureInterval match="2" matchid="Type" fillcolor="#D1E1FC" />
    <FeatureInterval match="3" matchid="Type" fillcolor="#D2D2D2" />
    <FeatureInterval match="4" matchid="Type" fillcolor="#D2D2D2" />
    <FeatureInterval match="5" matchid="Type" fillcolor="#D2D2D2" />
    <FeatureInterval match="6" matchid="Type" fillcolor="#D2D2D2" />
  </Style>
  <Layer >
    <Name>overlaymask</Name>
    <Title>overlaymask</Title>
    <FilePath>{ADAGUC_PATH}/data/datasets/knmi/overlays/GSIE-NL-overlaymask.geojson</FilePath>
    <Variable>features</Variable>
    <Styles>filledcountries</Styles>
  </Layer>

<!-- Demo to plot unform coloured discs with temperature-->
  <Legend name="wow.temperature" type="interval">
    <palette index="0" color="#2E2E73"/>  <!-- -14 0 -->
    <palette index="9" color="#282898"/>  <!-- -12 1 -->
    <palette index="18" color="#201FBB"/> <!-- -10 2 -->
    <palette index="27" color="#1A1ADC"/> <!-- -8  3 -->
    <palette index="36" color="#3654DE"/> <!-- -6  4 -->
    <palette index="45" color="#548EDC"/> <!-- -4  5 -->
    <palette index="54" color="#72CADE"/> <!-- -2  6 -->
    <palette index="63" color="#6DD8DF"/> <!-- 0   7 -->
    <palette index="72" color="#55CDE2"/> <!-- 2   8 -->
    <palette index="81" color="#38BBDC"/> <!-- 4   9 -->
    <palette index="90" color="#20B0DC"/> <!-- 6   10 -->
    <palette index="99" color="#19BAA6"/> <!-- 8   11 -->
    <palette index="108" color="#1CCE6A"/> <!-- 10 12 -->
    <palette index="117" color="#1BDF22"/> <!-- 12 13 -->
    <palette index="126" color="#82C319"/> <!-- 14 14 -->
    <palette index="135" color="#DCA819"/> <!-- 16 15 -->
    <palette index="144" color="#DD921A"/> <!-- 18 16 -->
    <palette index="153" color="#DE7C1A"/> <!-- 20 17 -->
    <palette index="162" color="#DF671A"/> <!-- 22 18 -->
    <palette index="171" color="#DE501A"/> <!-- 24 19 -->
    <palette index="180" color="#DD3819"/> <!-- 26 20 -->
    <palette index="189" color="#DD2319"/> <!-- 28 21 -->
    <palette index="198" color="#D21A1E"/> <!-- 30 22 -->
    <palette index="207" color="#C31927"/> <!-- 32 23 -->
    <palette index="216" color="#AD1A30"/> <!-- 34 24 -->
    <palette index="225" color="#9A1A3B"/> <!-- 36 25 -->
    <palette index="234" color="#871A44"/> <!-- 38 26 -->
    <palette index="240" color="#871A44"/> <!--  39,33 -->
  </Legend>

  <Style name="discs">
    <Point pointstyle="disc" fillcolor="#00000060" textcolor="#FFFFFFFF" linecolor="#000000A0" discradius="18" dot="false" fontfile="{ADAGUC_PATH}/data/fonts/FreeSans.ttf" fontsize="10" textformat="%0.1f"/>
    <FilterPoints use="06235,06280,06260,06290,06310,06380"/>
  </Style>

  <Style name="temperature">
    <Legend fixed="true" tickinterval="2">wow.temperature</Legend>
    <Min>-14</Min>
    <Max>39,33333333</Max> <!-- 39,33333333 = (240 / (234/(38 - -14))) - 14 -->
    <Point plotstationid="false" pointstyle="point" discradius="15" textradius="0" dot="false" fontsize="8" textcolor="#000000" />
  </Style>

  <Style name="temperature_thinned">
    <Legend fixed="true" tickinterval="2">wow.temperature</Legend>
    <Min>-14</Min>
    <Max>39,33333333</Max> <!-- 39,33333333 = (240 / (234/(38 - -14))) - 14 -->
    <Thinning radius="140"/>
    <Point plotstationid="false" pointstyle="point" discradius="15" textradius="0" dot="false" fontsize="8" textcolor="#000000" />
  </Style>

  <Style name="temperature_selectpoint">
    <Legend fixed="true" tickinterval="2">wow.temperature</Legend>
    <RenderMethod>nearest</RenderMethod>
    <Min>-14</Min>
    <Max>39,33333333</Max> <!-- 39,33333333 = (240 / (234/(38 - -14))) - 14 -->

    <!-- Use different disc/volume styling per range -->
    <Point min="-10" max="10" pointstyle="disc"   discradius="40" fillcolor="#ffff00" textformat=" "/>
    <Point min="13"  max="20" pointstyle="volume" discradius="25" fillcolor="#00ffff" textformat=" "/>

    <!-- Use different text color/sizes per range -->
    <Point min="-10" max="10" pointstyle="point" fontsize="10" discradius="0" textcolor="#0000ff" textformat="%0.0f" />
    <Point min="10"  max="12" pointstyle="point" fontsize="25" discradius="0" textcolor="#555555" textformat="%0.0f" />
    <Point min="12"  max="20" pointstyle="point" fontsize="40" discradius="0" textcolor="#ff5555" textformat="%0.0f" />

    <!-- Select variable air-temperature-hagl to show in points -->
    <DataPostProc algorithm="pointsfromgrid" select="air-temperature-hagl" a="20"/>
  </Style>

  <Layer type="database">
    <FilePath filter=".*\.nc$">{ADAGUC_PATH}/data/datasets/test/netcdfpointtimeseries/</FilePath>
    <Name>ta</Name>
    <Title>temperatuur [C]</Title>
    <Variable>ta</Variable>
    <Abstract>luchttemperatuur 1 min. gemiddelde</Abstract>
    <Styles>discs,temperature,temperature_thinned</Styles>
  </Layer>

  <Layer type="database">
    <Name>air_temperature_hagl</Name>
    <Title>UWCW_HA43ENS(NL) Air temperature at 2 m</Title>
    <Variable>air-temperature-hagl</Variable>
    <FilePath filter="(uwcw_ha43ens_nl_2km_air-temperature-hagl_geoweb_nc_[0-9T]{11}\.nc)">{ADAGUC_PATH}/data/datasets/arcustest_uwcw/uwcw_ha43ens_nl_2km_air-temperature-hagl_geoweb_nc_20240523T00-small5x5.nc</FilePath>
    <Styles>temperature_selectpoint</Styles>
    <Dimension name="forecast_reference_time" units="ISO8601" hidden="false">reference_time</Dimension>
    <Dimension name="time" units="ISO8601" default="min">time</Dimension>
    <Dimension name="temp_at_hagl" units="m" default="min" hidden="true">height_above_ground_level_in_m</Dimension>
    <Dimension name="member" units="" default="min" type="custom" hidden="false">member</Dimension>
  </Layer>

  <Style name="windbarbs_kts_selectpoint_for_grids">
    <ShadeInterval min="0" max="0.3"     label=" 0  [  &lt; 0 kts] (&lt; 0.3 m/s)" fillcolor="#9600fe"/>
    <ShadeInterval min="0.3" max="1.6"   label=" 1  [  1-3 kts  ] (0.3-1.6 m/s)" fillcolor="#9600fe"/>
    <ShadeInterval min="1.6" max="3.4"   label=" 2  [  4-6 kts  ] (1.6-3.4 m/s)" fillcolor="#0064fe"/>
    <ShadeInterval min="3.4" max="5.5"   label=" 3  [  7-10 kts ] (3.4-5.5 m/s)" fillcolor="#00c8fe"/>
    <ShadeInterval min="5.5" max="8.0"   label=" 4  [ 11-16 kts ] (5.5-8.0 m/s)" fillcolor="#25c192"/>
    <ShadeInterval min="8.0" max="10.8"  label=" 5  [ 17-21 kts ] (8.0-10.8 m/s)" fillcolor="#00e600"/>
    <ShadeInterval min="10.8" max="13.9" label=" 6  [ 22-27 kts ] (10.8-13.9 m/s)" fillcolor="#00fa00"/>
    <ShadeInterval min="13.9" max="17.2" label=" 7  [ 28-33 kts ] (13.9-17.2 m/s)" fillcolor="#feae00"/>
    <ShadeInterval min="17.2" max="20.8" label=" 8  [ 34-40 kts ] (17.2-20.8 m/s)" fillcolor="#b40032"/>
    <ShadeInterval min="20.8" max="24.5" label=" 9  [ 41-47 kts ] (20.8-24.5 m/s)" fillcolor="#fE0096"/>
    <ShadeInterval min="24.5" max="200"  label="10 [  &gt;48 kts ] (&gt;24.5 m/s)" fillcolor="#420027"/>

    <Point pointstyle="point" fontsize="10" discradius="0" textcolor="#ffffff" textoutlinecolor="#000000"  textformat="%0.1f" />

    <RenderSettings renderhint="discreteclasses" />

    <!--
      Extracts point from a grid and makes them available for the point renderer
      - select: Which data objects to sample from the Layer
      - a: Optionally apply thinning in pixels, points will be no closer than a pixels in the GetMap response.
    -->
    <DataPostProc algorithm="pointsfromgrid" select="speed_component" a="50"/>

    <RenderMethod>nearest</RenderMethod>
  </Style>

  <Layer type="database">
    <Name>windbarbs_kts_selectpoint_for_grids</Name>
    <Title>Wind speed values from gridded model data</Title>
    <Variable>x_wind__at_10m</Variable>
    <Variable>y_wind__at_10m</Variable>
    <FilePath filter="">{ADAGUC_PATH}data/datasets/harmonie_wind_grid_30x30.nc</FilePath>
    <Dimension name="time" units="ISO8601" default="min">time</Dimension>
    <Dimension name="forecast_reference_time" units="ISO8601">reference_time</Dimension>
    <Styles>windbarbs_kts_selectpoint_for_grids</Styles>
    <!--
      convert_uv_components is a data postprocessor to transform grid relative x and y components of a vector to relative to north components. This uses a jacobian transformation.
      This processor will add four more dataobjects to the datasource. The two original components are now last. The new one dataobjects are:
      - `speed_component`: based on the magnitude of the eastward_wind and northward_wind components
      - `direction_component`: based on the direction of the eastward_wind and northward_wind components
      - `eastward_component`: based on the original x and y components. Corrected using jacobian transformation
      - `northward_component`: based on the original x and y components. Corrected using jacobian transformation
    -->
    <DataPostProc algorithm="convert_uv_components"/>
  </Layer>
</Configuration>
 